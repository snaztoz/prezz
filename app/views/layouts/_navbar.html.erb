<%# locals: (tenant: nil, user: nil) %>

<% if authenticated? %>
  <nav data-controller="navbar" class="lg:border-r border-neutral-300">
    <div class="p-4 lg:hidden flex justify-between items-center bg-white border-b border-neutral-300">
      <div class="size-6 bg-green-500 rounded-md"></div>
      <button data-action="navbar#openMenu">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-menu-icon lucide-menu"><path d="M4 5h16"/><path d="M4 12h16"/><path d="M4 19h16"/></svg>
      </button>
    </div>

    <div
      class="hidden lg:hidden fixed z-10 inset-0 bg-neutral-900 opacity-25"
      data-navbar-target="overlay"
      data-action="click->navbar#closeMenu"
    ></div>

    <div
      class="w-5/6 md:w-2/3 lg:w-full h-full flex flex-col fixed lg:static z-20 inset-y-0 -translate-x-full lg:translate-x-0 transform transition-transform duration-300 bg-white border-r lg:border-0 border-neutral-200 lg:shadow-md"
      data-navbar-target="menu"
    >
      <header class="px-6 py-4 flex items-center gap-4 border-b border-neutral-200">
        <div class="size-6 bg-orange-500 rounded-md"></div>
        <div class="grow relative space-y-0.5">
          <h2 class="text-sm font-semibold">
            <%= link_to tenant do %>
              <span class="absolute inset-0"></span>
              <%= tenant.name %>
            <% end %>
          </h2>
          <p class="text-sm text-neutral-600"><%= tenant.time_zone %></p>
        </div>
      </header>

      <div class="grow overflow-y-auto space-y-4">
        <%= render NavbarMenuGroupComponent.new do |group| %>
          <% group.with_item(text: "My Shifts", link: "#") do |item| %>
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-notebook-text-icon lucide-notebook-text size-5"><path d="M2 6h4"/><path d="M2 10h4"/><path d="M2 14h4"/><path d="M2 18h4"/><rect width="16" height="20" x="4" y="2" rx="2"/><path d="M9.5 8h5"/><path d="M9.5 12H16"/><path d="M9.5 16H14"/></svg>
          <% end %>

          <% group.with_item(text: "Attendance Log", link: "#") do |item| %>
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-history-icon lucide-history size-5"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/><path d="M12 7v5l4 2"/></svg>
          <% end %>

          <% group.with_item(text: "My Teams", link: "#") do |item| %>
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-users-round-icon lucide-users-round size-5"><path d="M18 21a8 8 0 0 0-16 0"/><circle cx="10" cy="8" r="5"/><path d="M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3"/></svg>
          <% end %>

          <% group.with_item(text: "Day Off", link: "#") do |item| %>
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-send-icon lucide-send size-5"><path d="M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z"/><path d="m21.854 2.147-10.94 10.939"/></svg>
          <% end %>
        <% end %>

        <% if user.admin? %>
          <%= render NavbarMenuGroupComponent.new do |group| %>
            <% group.with_name do %>
              Admin Management
            <% end %>

            <% group.with_item(text: "Users & Teams", link: "#") do |item| %>
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-users-round-icon lucide-users-round size-5"><path d="M18 21a8 8 0 0 0-16 0"/><circle cx="10" cy="8" r="5"/><path d="M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3"/></svg>
            <% end %>

            <% group.with_item(text: "Shifts", link: "#") do |item| %>
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-calendar-range-icon lucide-calendar-range size-5"><rect width="18" height="18" x="3" y="4" rx="2"/><path d="M16 2v4"/><path d="M3 10h18"/><path d="M8 2v4"/><path d="M17 14h-6"/><path d="M13 18H7"/><path d="M7 14h.01"/><path d="M17 18h.01"/></svg>
            <% end %>

            <% group.with_item(text: "Tenant", link: "#") do |item| %>
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-building-icon lucide-building size-5"><path d="M12 10h.01"/><path d="M12 14h.01"/><path d="M12 6h.01"/><path d="M16 10h.01"/><path d="M16 14h.01"/><path d="M16 6h.01"/><path d="M8 10h.01"/><path d="M8 14h.01"/><path d="M8 6h.01"/><path d="M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3"/><rect x="4" y="2" width="16" height="20" rx="2"/></svg>
            <% end %>
          <% end %>
        <% end %>
      </div>

      <footer class="px-6 py-4 hidden lg:flex items-center gap-4 border-t border-neutral-200">
        <div class="size-6 bg-green-500 rounded-md"></div>
        <h2 class="text-sm font-medium">
          <%= user.full_name %>
        </h2>
      </footer>
    </div>
  </nav>
<% end %>
